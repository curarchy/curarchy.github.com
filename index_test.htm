<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title></title>
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.10.1/jquery.min.js"></script>
    <script type="text/javascript">
        (function () {
            var topics = {};

            window.observer = function () {

            };

            observer.prototype = {
                publish: function (type, data) {
                    var subList = topics[type];
                    if (subList && subList.length) {
                        for (var a in subList) {
                            subList[a].fun.call(this,data);
                        }
                    }
                },
                addSub: function (type, sub) {
                    topics[type] = topics[type] || [];
                    topics[type].push(sub);
                }
            };

            window.sub = function ( callback) {
                this.fun = callback;
            };
        })();

</script>
</head>
<body>

</body>
</html>