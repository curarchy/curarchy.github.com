<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <link href="/favicon.ico?" type="image/x-icon" rel="shortcut icon">
    <link href="/favicon.ico?" type="image/x-icon" rel="icon">
    <link href="/webresources/bootstrap/css/bootstrap.min.css" rel="stylesheet" type="text/css"
        media="screen" />
    <link href="/webresources/css/common.css?" rel="stylesheet" type="text/css" />
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.10.1/jquery.min.js"></script>
    <script src="/webresources/bootstrap/js/bootstrap.min.js" type="text/javascript"></script>
    <script src="/webresources/javascript/resource.js?" type="text/javascript"></script>
    <script src="/webresources/javascript/common.js?" type="text/javascript"></script>
    <script src="/webresources/javascript/infosky.js" type="text/javascript"></script>
    <link href="/webresources/css/infosky.css" rel="stylesheet" type="text/css" />
    <script src="/webresources/javascript/data/airport.js" type="text/javascript"></script>
    <script src="/webresources/bootstrap/js/prettify.js" type="text/javascript"></script>
    <link href="/webresources/css/prettify.css" rel="stylesheet" type="text/css" />
</head>
<body>
    <div style="margin:50px auto;width:500px;">
        <a class="btn" onclick="getData()" style="margin-right:20px;">read xml</a>
        <input id="filterInput" type="text" style="width: 100px;" />
    </div>
</body>
</html>
<script>
    var b = "";
    var array = [];
    function getData() {
        var stamp = new Date();
        $.get("/webresources/javascript/data/bigxmldata.xml?" + (new Date())).done(
            function (data) {
                //console.info(arguments[2].responseText);                
                b=arguments[2].responseText.replace(/\s*<OPEDEPARTID>\s*/g,"@-|").replace(/\s*<\/OPEDEPARTID>\s*/g,"")
                    .replace(/\s*<OPEDEPSHORTNM>\s*/g,"|").replace(/\s*<\/OPEDEPSHORTNM>\s*/g,"")
                    .replace(/\s*<OPEDEPNAME>\s*/g,"|").replace(/\s*<\/OPEDEPNAME>\s*/g,"")
                    .replace(/\s*<COMPANYID>\s*/g,"|").replace(/\s*<\/COMPANYID>\s*/g,"")
                    .replace(/\s*<CITYID>\s*/g,"|").replace(/\s*<\/CITYID>\s*/g,"")
                    .replace(/\s*<CGODOM>\s*/g,"|").replace(/\s*<\/CGODOM>\s*/g,"")
                    .replace(/\s*<CGOINT>\s*/g,"|").replace(/\s*<\/CGOINT>\s*/g,"")
                    .replace(/\s*<TYPE>\s*/g,"|").replace(/\s*<\/TYPE>\s*/g,"")
                    .replace(/\s*<CUSTOMERSHORTNM>\s*/g,"|").replace(/\s*<\/CUSTOMERSHORTNM>\s*/g,"")
                    .replace(/\s*<AIRPORTID>\s*/g,"|").replace(/\s*<\/AIRPORTID>\s*/g,"")
                    .replace(/\s*<ITEM>\s*/g,"").replace(/\s*<\/ITEM>\s*/g,"")
                    .replace(/\s*<OPEDEPART>\s*/g,"").replace(/\s*<\/OPEDEPART>\s*/g,"")
                    .replace(/\s*<BASEDATA>\s*/g,"").replace(/\s*<\/BASEDATA>\s*/g,"")
                    .replace(/\s*<BASEDATARET>\s*/g,"").replace(/\s*<\/BASEDATARET>\s*/g,"")
                    .replace(/\s*<\?xml[\w\W]*<\/RESULT>\s*/g,"")
                    .replace(/\s*<\w+\s*\/>\s*/g,"");
                console.info(b);
                console.info("string length: "+arguments[2].responseText.length);
                console.info("new string length: "+b.length);
                _$.auto.setup({"sortEnable":false});
                _$.auto.init($("#filterInput"), b,{key:"二字码"});
            })
            .fail(function () {
                console.info(arguments[1]);
            })
            .always(function () {
                var time = new Date();
                console.info("finished in: "+(time-stamp)+" ms");
            });
    }
</script>