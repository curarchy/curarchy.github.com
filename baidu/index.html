<!DOCTYPE html><!--[if IE 6]><html class="ie6"><![endif]--><!--[if IE 7]><html class="ie7"><![endif]--><!--[if IE 8]><html class="ie8"><![endif]--><!-- [if gt IE 8] <!--><html><!-- <![endif]-->
<head>
    <meta charset="utf-8">
    <title>测试页</title>
    <script src="./src/common/esl.js"></script>
    <link rel="stylesheet" href="dep/esui/3.1.0-alpha.5/src/css/main.css" />
    <link rel="stylesheet" href="src/ui/css/ui.css" />
</head>
<body>
    <div id="page">
        <div>
            <h1 id="title">Toast测试页</h1>

            <select data-ui-type="Select" data-ui-id="msgType" data-ui-width="185" name="msgType">
                <option value="show" selected="selected">show</option>
                <option value="alert">alert</option>
                <option value="info">info</option>
                <option value="error">error</option>
                <option value="success">success</option>
            </select>
            <div>
                <textarea data-ui-id="msgContent" type="textarea" data-ui-type="TextBox" 
                    data-ui-width="200" data-ui-height="80" placeholder="msgContent"><strong>hello:</strong>这是提示信息</textarea>
            </div>
            <input data-ui-id="time" type="text" data-ui-type="TextBox" placeholder="这是显示时间" value="3000" data-ui-hint="ms" data-ui-hint-type="suffix"/>

            <div>
                <input type="checkbox" data-ui-id='isDispose' data-ui-type="CheckBox" title="隐藏时是否销毁"/>
            </div>

            <div>
                <input type="checkbox" data-ui-id='isStack' data-ui-type="CheckBox" title="是否在底部堆叠"/>
            </div>

            <div data-ui-id="show" data-ui-type="Button">显示信息</div>

            <div style="position: fixed; right:10px; top:10px;">
                <textarea data-ui-id="toastLog" type="textarea" data-ui-type="TextBox" 
                    data-ui-width="800" data-ui-height="400" placeholder="logArea">log:</textarea>
            </div>
        </div>
        <div id="footer">

        </div>
    </div>        
    <script>
        require.config({
            'baseUrl': 'src',
            'paths': {
                'tpl': 'common/tpl',
                'js': 'common/js'
            },
            'packages': [
                {
                    'name': 'underscore',
                    'location': '../dep/underscore/1.5.2/src',
                    'main': 'underscore'
                },
                {
                    'name': 'ef',
                    'location': '../dep/ef/3.1.0-alpha.3/src',
                    'main': 'main'
                },
                {
                    'name': 'er',
                    'location': '../dep/er/3.1.0-alpha.4/src',
                    'main': 'main'
                },
                {
                    'name': 'esui',
                    'location': '../dep/esui/3.1.0-alpha.5/src',
                    'main': 'main'
                },
                {
                    'name': 'echarts',
                    'location': '../dep/echarts/1.2.0/src',
                    'main': 'echarts'
                },
                {
                    'name': 'zrender',
                    'location': '../dep/zrender/1.0.3/src',
                    'main': 'zrender'
                },
                {
                    'name': 'jquery',
                    'location': '../dep/jquery/1.9.1/src',
                    'main': 'jquery.min.js'
                },
                {
                    'name': 'moment',
                    'location': '../dep/moment/2.0.0/src',
                    'main': 'moment'
                },
                {
                    'name': 'saber-cookie',
                    'location': '../dep/saber-cookie/0.1.0/src',
                    'main': 'cookie'
                },
                {
                    'name': 'mini-event',
                    'location': '../dep/mini-event/1.0.0/src',
                    'main': 'main'
                },
                {
                    'name': 'er-track',
                    'location': '../dep/er-track/0.9.0/src',
                    'main': 'main'
                },
                {
                    'name': 'etpl',
                    'location': '../dep/etpl/2.0.8/src',
                    'main': 'main'
                },
                {
                    'name': 'est',
                    'location': '../dep/est/1.1.0/src'
                },
                {
                    'name': 'test',
                    'location': '../test'
                }
            ]
        });

        require(
            [
                'esui', 'ui/Toast','esui/Button','esui/Select','esui/TextBox','esui/CheckBox'
            ],
            function (ui, Toast) {
                ui.init(document.body);
                ui.get('show').on(
                    'click',
                    function () {
                        var content = ui.get('msgContent').getValue();
                        var msgType = ui.get('msgType').getValue();
                        var time = ui.get('time').getValue();
                        var isDispose = ui.get('isDispose').isChecked();
                        var logArea = ui.get('toastLog');
                        var isStack = ui.get('isStack').isChecked();
                        
                        var lastToast = Toast[msgType](
                            content, 
                            {
                                duration: time, 
                                disposeOnHide: isDispose,
                                isStack: isStack
                            });
                        
                        var logInfo = "\r\n弹出了一个toast, 完整html为\r\n" + lastToast.main.outerHTML;
                        logArea.setValue(logArea.getValue() + logInfo);
                    }
                );
            }
        );
    </script>
</body>
</html>